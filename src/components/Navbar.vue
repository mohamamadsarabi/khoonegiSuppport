<template>
	<nav
		class="
			shadow-none
			navbar navbar-main navbar-expand-lg
			border-radius-xl
			shadow-blur
			mt-4
			position-sticky
			left-auto
			z-index-sticky
			py-3
			px-4
			mx-4
		"
		v-bind="$attrs"
		id="navbarBlur"
		data-scroll="true"
	>
		<div class="navbar-khoonegi">
			<breadcrumbs
				class="khoonegi-breadcrumb d-none d-xl-block"
				:textWhite="textWhite"
			/>
			<a
				href="#"
				@click="toggleSidebar"
				class="
					p-0
					nav-link
					text-body
					nav-item
					d-xl-none d-flex
					align-items-center
					ms-2
				"
				id="iconNavbarSidenav"
			>
				<div class="sidenav-toggler-inner">
					<i class="sidenav-toggler-line"></i>
					<i class="sidenav-toggler-line"></i>
					<i class="sidenav-toggler-line"></i>
				</div>
			</a>
			<button class="page-name d-xl-none">{{ currentRouteName.name }}</button>

			<div
				class="
					justify-content-end
					mt-2
					collapse
					navbar-collapse
					mt-sm-0
					me-md-0 me-sm-4
					px-0
				"
				id="navbar"
			>
				<ul class="navbar-nav justify-content-end access-menu">
					<li
						class="nav-item dropdown d-xl-block d-flex align-items-center mr-2"
					>
						<button
							title="بارگزاری صفحه"
							class="p-0 nav-link"
							:class="[
								textWhite ? textWhite : 'text-body',
								showMenu ? 'show' : '',
							]"
							@click="reload"
						>
							<svg
								width="23"
								height="23"
								viewBox="0 0 15 16"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									fill-rule="evenodd"
									clip-rule="evenodd"
									d="M1.86321 0.508071C1.86445 0.22872 1.63901 0.0012515 1.35966 5.14256e-06C1.08031 -0.00124117 0.852837 0.224207 0.85159 0.503557L0.845484 1.87197C0.843199 2.38108 0.841293 2.80569 0.878574 3.14707C0.917678 3.50514 1.00508 3.83515 1.22694 4.12184C1.27497 4.1839 1.32687 4.24277 1.3823 4.29811C1.43702 4.35275 1.49519 4.40394 1.55646 4.45136C1.84315 4.67322 2.17316 4.76062 2.53123 4.79973C2.87261 4.83701 3.29721 4.8351 3.80631 4.83282L5.17474 4.82671C5.45409 4.82546 5.67954 4.598 5.6783 4.31864C5.67705 4.03929 5.44958 3.81385 5.17023 3.81509L3.83103 3.82107C3.28514 3.8235 2.91847 3.82437 2.64105 3.79408C2.62019 3.7918 2.60023 3.78938 2.58111 3.78682C3.72466 2.49744 5.39231 1.68605 7.25 1.68605C10.6954 1.68605 13.4884 4.47906 13.4884 7.92442C13.4884 8.20377 13.7148 8.43023 13.9942 8.43023C14.2735 8.43023 14.5 8.20377 14.5 7.92442C14.5 3.92035 11.2541 0.674419 7.25 0.674419C5.12372 0.674419 3.21086 1.59033 1.88537 3.04755L1.88422 3.03725C1.85393 2.75983 1.8548 2.39316 1.85723 1.84727L1.86321 0.508071Z"
									fill="#979797"
								/>
								<path
									d="M1.01163 7.92442C1.01163 7.64507 0.785167 7.4186 0.505814 7.4186C0.226461 7.4186 0 7.64507 0 7.92442C0 11.9285 3.24594 15.1744 7.25 15.1744C9.35265 15.1744 11.2466 14.2788 12.5702 12.8497C12.5916 13.1154 12.5907 13.4599 12.5885 13.9473L12.5825 15.2865C12.5813 15.5659 12.8067 15.7934 13.0861 15.7946C13.3654 15.7958 13.5929 15.5704 13.5942 15.291L13.6003 13.9226C13.6025 13.4135 13.6045 12.9889 13.5672 12.6475C13.5281 12.2895 13.4407 11.9595 13.2188 11.6728C13.1772 11.619 13.1326 11.5675 13.0854 11.5188C13.0243 11.4557 12.9588 11.3971 12.8893 11.3432C12.6026 11.1214 12.2726 11.034 11.9145 10.9949C11.5731 10.9576 11.1485 10.9595 10.6395 10.9618L9.271 10.9679C8.99165 10.9691 8.7662 11.1966 8.76745 11.476C8.7687 11.7553 8.99617 11.9808 9.27552 11.9795L10.6147 11.9735C11.1606 11.9711 11.5273 11.9702 11.8047 12.0005C11.8607 12.0066 11.9102 12.0138 11.9542 12.0218C10.8098 13.3345 9.12691 14.1628 7.25 14.1628C3.80464 14.1628 1.01163 11.3698 1.01163 7.92442Z"
									fill="#979797"
								/>
							</svg>
						</button>
					</li>
					<li
						class="d-xl-block nav-item dropdown d-flex align-items-center mr-2"
					>
						<button
							title="خروجی اکسل"
							class="p-0 nav-link"
							@click.prevent="exportCsv()"
							:class="[
								textWhite ? textWhite : 'text-body',
								showMenu ? 'show' : '',
							]"
						>
              <svg
                  width="23"
                  height="23"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
              >
                <path
                    d="M8.61539 3.89744C8.61539 3.55757 8.33987 3.28205 8 3.28205C7.66013 3.28205 7.38462 3.55757 7.38462 3.89744V12.1026C7.38462 12.4424 7.66013 12.7179 8 12.7179C8.33987 12.7179 8.61539 12.4424 8.61539 12.1026V3.89744Z"
                    fill="#979797"
                />
                <path
                    d="M11.8974 7.17949C11.8974 6.83962 11.6219 6.5641 11.2821 6.5641C10.9422 6.5641 10.6667 6.83962 10.6667 7.17949V12.1026C10.6667 12.4424 10.9422 12.7179 11.2821 12.7179C11.6219 12.7179 11.8974 12.4424 11.8974 12.1026V7.17949Z"
                    fill="#979797"
                />
                <path
                    d="M5.33333 8.82051C5.33333 8.48065 5.05782 8.20513 4.71795 8.20513C4.37808 8.20513 4.10256 8.48065 4.10256 8.82051V12.1026C4.10256 12.4424 4.37808 12.7179 4.71795 12.7179C5.05782 12.7179 5.33333 12.4424 5.33333 12.1026V8.82051Z"
                    fill="#979797"
                />
                <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M11.6624 0.101521C10.7252 -1.19209e-05 9.54403 -6.59159e-06 8.03713 1.08584e-07H7.96287C6.45597 -6.59159e-06 5.27476 -1.19209e-05 4.33762 0.101521C3.38128 0.205133 2.60641 0.420369 1.94481 0.901048C1.54428 1.19205 1.19205 1.54428 0.901048 1.94481C0.420369 2.60641 0.205133 3.38128 0.101521 4.33762C-1.19209e-05 5.27476 -6.59159e-06 6.45597 1.08584e-07 7.96287V8.03713C-6.59159e-06 9.54403 -1.19209e-05 10.7252 0.101521 11.6624C0.205133 12.6187 0.420369 13.3936 0.901048 14.0552C1.19205 14.4557 1.54428 14.808 1.94481 15.099C2.60641 15.5796 3.38128 15.7949 4.33762 15.8985C5.27474 16 6.45593 16 7.96279 16H8.03715C9.54401 16 10.7253 16 11.6624 15.8985C12.6187 15.7949 13.3936 15.5796 14.0552 15.099C14.4557 14.808 14.808 14.4557 15.099 14.0552C15.5796 13.3936 15.7949 12.6187 15.8985 11.6624C16 10.7253 16 9.54407 16 8.03721V7.96285C16 6.45599 16 5.27474 15.8985 4.33762C15.7949 3.38128 15.5796 2.60641 15.099 1.94481C14.808 1.54428 14.4557 1.19205 14.0552 0.901048C13.3936 0.420369 12.6187 0.205133 11.6624 0.101521ZM2.66824 1.89676C3.08506 1.59392 3.61857 1.4174 4.47019 1.32513C5.33333 1.23161 6.44794 1.23077 8 1.23077C9.55206 1.23077 10.6667 1.23161 11.5298 1.32513C12.3814 1.4174 12.9149 1.59392 13.3318 1.89676C13.6278 2.11185 13.8882 2.37219 14.1032 2.66824C14.4061 3.08506 14.5826 3.61857 14.6749 4.47019C14.7684 5.33333 14.7692 6.44794 14.7692 8C14.7692 9.55206 14.7684 10.6667 14.6749 11.5298C14.5826 12.3814 14.4061 12.9149 14.1032 13.3318C13.8882 13.6278 13.6278 13.8882 13.3318 14.1032C12.9149 14.4061 12.3814 14.5826 11.5298 14.6749C10.6667 14.7684 9.55206 14.7692 8 14.7692C6.44794 14.7692 5.33333 14.7684 4.47019 14.6749C3.61857 14.5826 3.08506 14.4061 2.66824 14.1032C2.37219 13.8882 2.11185 13.6278 1.89676 13.3318C1.59392 12.9149 1.4174 12.3814 1.32513 11.5298C1.23161 10.6667 1.23077 9.55206 1.23077 8C1.23077 6.44794 1.23161 5.33333 1.32513 4.47019C1.4174 3.61857 1.59392 3.08506 1.89676 2.66824C2.11185 2.37219 2.37219 2.11185 2.66824 1.89676Z"
                    fill="#979797"
                />
              </svg>

            </button>
					</li>
					<li
						class="d-xl-block nav-item dropdown d-flex align-items-center mr-2"
					>
						<button
							title="پرینت"
							class="p-0 nav-link"
							onclick="window.print()"
							:class="[
								textWhite ? textWhite : 'text-body',
								showMenu ? 'show' : '',
							]"
						>
              <svg
                  width="23"
                  height="23"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
              >
                <path
                    d="M8.61538 0.615384C8.61538 0.275517 8.33987 0 8 0C7.66013 0 7.38462 0.275517 7.38462 0.615384V11.1265C7.11987 10.8579 6.80513 10.4624 6.3471 9.88471L5.20015 8.43817C4.989 8.17186 4.60193 8.12715 4.33562 8.3383C4.0693 8.54946 4.02459 8.93653 4.23575 9.20284L5.406 10.6788C5.84348 11.2305 6.20449 11.6859 6.5276 12.0102C6.85918 12.3431 7.22721 12.619 7.6975 12.694C7.79769 12.7099 7.89876 12.7179 8 12.7179C8.10124 12.7179 8.20231 12.7099 8.3025 12.694C8.77279 12.619 9.14082 12.3431 9.4724 12.0102C9.79551 11.6859 10.1565 11.2306 10.594 10.6788L11.7642 9.20284C11.9754 8.93653 11.9307 8.54946 11.6644 8.3383C11.3981 8.12715 11.011 8.17186 10.7998 8.43817L9.6529 9.88471C9.19487 10.4624 8.88013 10.8579 8.61538 11.1265V0.615384Z"
                    fill="#979797"
                />
                <path
                    d="M15.0564 6.80989C14.8523 6.53815 14.4666 6.48332 14.1948 6.68744C13.9231 6.89156 13.8682 7.27732 14.0724 7.54907C14.5101 8.13183 14.7692 8.85527 14.7692 9.64102V10.4615C14.7692 11.2473 14.7673 11.5685 14.7263 11.8276C14.49 13.3197 13.3197 14.49 11.8276 14.7263C11.5686 14.7673 11.2473 14.7692 10.4615 14.7692H5.53846C4.75269 14.7692 4.43145 14.7673 4.17244 14.7263C2.6803 14.49 1.51004 13.3197 1.27371 11.8276C1.23268 11.5685 1.23077 11.2473 1.23077 10.4615V9.64102C1.23077 8.85527 1.48991 8.13183 1.92764 7.54907C2.13176 7.27732 2.07694 6.89156 1.80519 6.68744C1.53344 6.48332 1.14768 6.53815 0.943562 6.80989C0.351238 7.59847 6.8353e-06 8.57962 6.8353e-06 9.64102L3.36295e-06 10.5278C-5.20968e-05 11.2269 -8.58428e-05 11.6528 0.0580926 12.0201C0.377835 14.0389 1.96113 15.6222 3.9799 15.9419C4.34723 16.0001 4.77307 16 5.47217 16H10.5278C11.2269 16 11.6528 16.0001 12.0201 15.9419C14.0389 15.6222 15.6222 14.0389 15.9419 12.0201C16.0001 11.6528 16.0001 11.2269 16 10.5278L16 9.64102C16 8.57962 15.6488 7.59847 15.0564 6.80989Z"
                    fill="#979797"
                />
              </svg>
						</button>
					</li>
					<li
						class="d-xl-block nav-item dropdown d-flex align-items-center mr-2"
					>
						<button
							title="برگشت"
							class="p-0 nav-link"
							:class="[
								textWhite ? textWhite : 'text-body',
								showMenu ? 'show' : '',
							]"
							@click="back"
						>
							<svg
								width="23"
								height="23"
								viewBox="0 0 16 16"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M10.0742 4.33452C10.3156 4.09527 10.3174 3.70564 10.0781 3.46424C9.83886 3.22285 9.44922 3.22111 9.20783 3.46036L7.73524 4.91987C7.18059 5.46957 6.72728 5.91884 6.40579 6.31915C6.07149 6.73542 5.8295 7.15793 5.76485 7.6651C5.73651 7.88748 5.73651 8.11252 5.76485 8.3349C5.8295 8.84207 6.07149 9.26459 6.40579 9.68086C6.72727 10.0812 7.18058 10.5304 7.73522 11.0801L9.20783 12.5396C9.44922 12.7789 9.83886 12.7772 10.0781 12.5358C10.3174 12.2944 10.3156 11.9047 10.0742 11.6655L8.62768 10.2318C8.04061 9.64994 7.63791 9.2495 7.36541 8.91019C7.10072 8.5806 7.00991 8.36889 6.98574 8.17929C6.97057 8.06023 6.97057 7.93977 6.98574 7.82072C7.00991 7.63111 7.10072 7.41941 7.36541 7.08981C7.6379 6.75051 8.04061 6.35007 8.62768 5.76821L10.0742 4.33452Z"
									fill="#979797"
								/>
								<path
									fill-rule="evenodd"
									clip-rule="evenodd"
									d="M11.6624 0.101521C10.7252 -1.19209e-05 9.54403 -6.59159e-06 8.03713 1.08584e-07H7.96287C6.45597 -6.59159e-06 5.27476 -1.19209e-05 4.33762 0.101521C3.38128 0.205133 2.60641 0.420369 1.94481 0.901048C1.54428 1.19205 1.19205 1.54428 0.901048 1.94481C0.420369 2.60641 0.205133 3.38128 0.101521 4.33762C-1.19209e-05 5.27476 -6.59159e-06 6.45597 1.08585e-07 7.96287V8.03713C-6.59159e-06 9.54403 -1.19209e-05 10.7252 0.101521 11.6624C0.205133 12.6187 0.420369 13.3936 0.901048 14.0552C1.19205 14.4557 1.54428 14.808 1.94481 15.099C2.60641 15.5796 3.38128 15.7949 4.33762 15.8985C5.27474 16 6.45593 16 7.96279 16H8.03715C9.54401 16 10.7253 16 11.6624 15.8985C12.6187 15.7949 13.3936 15.5796 14.0552 15.099C14.4557 14.808 14.808 14.4557 15.099 14.0552C15.5796 13.3936 15.7949 12.6187 15.8985 11.6624C16 10.7253 16 9.54407 16 8.03721V7.96285C16 6.45599 16 5.27474 15.8985 4.33762C15.7949 3.38128 15.5796 2.60641 15.099 1.94481C14.808 1.54428 14.4557 1.19205 14.0552 0.901048C13.3936 0.420369 12.6187 0.205133 11.6624 0.101521ZM2.66824 1.89676C3.08506 1.59392 3.61857 1.4174 4.47019 1.32513C5.33333 1.23161 6.44794 1.23077 8 1.23077C9.55206 1.23077 10.6667 1.23161 11.5298 1.32513C12.3814 1.4174 12.9149 1.59392 13.3318 1.89676C13.6278 2.11185 13.8882 2.37219 14.1032 2.66824C14.4061 3.08506 14.5826 3.61857 14.6749 4.47019C14.7684 5.33333 14.7692 6.44794 14.7692 8C14.7692 9.55206 14.7684 10.6667 14.6749 11.5298C14.5826 12.3814 14.4061 12.9149 14.1032 13.3318C13.8882 13.6278 13.6278 13.8882 13.3318 14.1032C12.9149 14.4061 12.3814 14.5826 11.5298 14.6749C10.6667 14.7684 9.55206 14.7692 8 14.7692C6.44794 14.7692 5.33333 14.7684 4.47019 14.6749C3.61857 14.5826 3.08506 14.4061 2.66824 14.1032C2.37219 13.8882 2.11185 13.6278 1.89676 13.3318C1.59392 12.9149 1.4174 12.3814 1.32513 11.5298C1.23161 10.6667 1.23077 9.55206 1.23077 8C1.23077 6.44794 1.23161 5.33333 1.32513 4.47019C1.4174 3.61857 1.59392 3.08506 1.89676 2.66824C2.11185 2.37219 2.37219 2.11185 2.66824 1.89676Z"
									fill="#979797"
								/>
							</svg>
						</button>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</template>
<script>
	import Breadcrumbs from "./Breadcrumbs.vue";
	import { mapMutations, mapActions } from "vuex";

	export default {
		name: "navbar",
		data() {
			return {
				showMenu: false
			};
		},
		props: ["minNav", "textWhite"],
		created() {
			this.minNav;
		},

		computed: {
			currentRouteName() {
				return this.$route;
			},
		},
		methods: {
			...mapMutations(["navbarMinimize", "toggleConfigurator"]),
			...mapActions(["toggleSidebarColor"]),
			exportCsv() {
				var htmltable = document.querySelector("table");
				// var htmltable = document.querySelector(".table-csv");
				var html = htmltable.outerHTML;
        console.log(html)
				window.open("data:application/vnd.ms-excel," + encodeURIComponent(html));
			},
			reload() {
				location.reload();
			},
			back() {
				this.$router.back();
			},
			toggleSidebar() {
				document.body.style.overflow = "hidden";
				this.toggleSidebarColor("bg-white");
				this.navbarMinimize();
			},
		},
		components: {
			Breadcrumbs,
		},

		updated() {
			const navbar = document.getElementById("navbarBlur");
			window.addEventListener("scroll", () => {
				if (window.scrollY > 10 && this.$store.state.isNavFixed) {
					navbar.classList.add("blur");
					navbar.classList.add("position-sticky");
					navbar.classList.add("shadow-blur");
				} else {
					navbar.classList.remove("blur");
					navbar.classList.remove("position-sticky");
					// navbar.classList.remove("shadow-blur");
				}
			});
		},
	};
</script>

<style lang="scss" scoped>
	.navbar-khoonegi {
		width: 100%;
		display: flex;
		align-items: baseline;
	}

	.mr-2 {
		margin-right: 13px;
	}

	.shadow-blur {
		box-shadow: 0px 0px 50px rgba(216, 216, 216, 0.2) !important;
		background: #ffffff !important;
	}

	.page-name {
		color: #979797 !important;
	}
	@media (max-width: 768px) {
		.access-menu {
			svg {
				width: 18px;
			}
		}
	}
</style>
